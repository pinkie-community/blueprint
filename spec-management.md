# Spec Management: 設定・仕様管理ガイド

## はじめに：なぜ設定管理が重要なのか

pinkie-community では、GitHub設定、ラベル体系、Epic構造、ドキュメント仕様など、**コミュニティの基盤となる設定や仕様** を適切に管理することで、一貫性のある運営を実現します。

これらの設定変更は単なる技術作業ではなく、**コミュニティの文化や働き方を決める重要な意思決定** です。そのため、専用のラベル体系とプロセスで管理します。

## 設定・仕様管理のラベル体系

### 🔧 spec ラベル（メインカテゴリ）
**基本ラベル**: `spec` `#6f42c1` - 設定・仕様に関する全般的な作業

### 📋 設定種別ラベル（spec-type）

#### 🏷️ spec-labels `#8b5cf6`
- **対象**: GitHubラベルの新規作成・変更・削除
- **例**: 新しいラベル追加、ラベル色の変更、ラベル説明の更新

#### 🎯 spec-milestones `#a855f7`
- **対象**: GitHubマイルストーンの管理
- **例**: Phase別マイルストーン、短期目標の設定・変更

#### 📝 spec-templates `#c084fc`  
- **対象**: Issue/PR テンプレートの作成・更新
- **例**: Epic Issue テンプレート、バグレポートテンプレート

#### 🎭 spec-workflows `#d8b4fe`
- **対象**: GitHub Actions や自動化設定
- **例**: 自動ラベル付け、PR自動チェック

#### 📋 spec-processes `#e9d5ff`
- **対象**: 作業フロー・プロセス設計
- **例**: Epic運用ルール、コントリビューション フロー

#### 📚 spec-docs `#f3e8ff`
- **対象**: CLAUDE.md、AGENTS.md等の設定ドキュメント
- **例**: Epic運用ガイド、クイックリファレンス

### 🚨 重要度ラベル（spec向け）

#### 🔴 spec-breaking `#dc2626`
- **既存の作業に影響する重大な変更**
- 例: ラベル名変更、Epic構造の大幅変更
- **必須対応**: 影響範囲の明確化と移行計画

#### 🟡 spec-enhancement `#f59e0b`  
- **機能追加・改善**
- 例: 新ラベルカテゴリ追加、テンプレート改良

#### 🟢 spec-maintenance `#10b981`
- **保守・メンテナンス**
- 例: ドキュメント更新、スクリプト最適化

## 設定・仕様変更のプロセス

### Phase 1: 提案・議論 (Issue)
```
タイトル例: [spec] GitHub Actions による自動ラベル付け機能の追加
ラベル: spec + spec-workflows + spec-enhancement
```

**Issue テンプレート**:
```markdown
# 🔧 設定・仕様変更の提案

## 📋 変更の概要
（何を変更するか、なぜ必要かを明記）

## 🎯 期待される効果
- 効率化の観点
- ユーザビリティの観点
- 運営負荷軽減の観点

## 📊 影響範囲
- [ ] 既存Issue/PRへの影響
- [ ] 既存ワークフローへの影響  
- [ ] ドキュメント更新の必要性
- [ ] ユーザーへの周知が必要

## 🔄 移行計画（spec-breaking の場合）
（段階的な移行方法を記載）

## ✅ チェックリスト
- [ ] 関連ドキュメントの確認
- [ ] 類似設定との整合性確認
- [ ] テスト方法の検討
```

### Phase 2: 実装 (Pull Request)
```
タイトル例: [spec] Add automated labeling workflow for new issues
ラベル: spec + spec-workflows + spec-enhancement
```

**PR テンプレート**: 通常のPRテンプレートに加えて：
```markdown
## 🔧 設定・仕様変更の詳細

### 変更内容
- [ ] 変更ファイル1: 詳細
- [ ] 変更ファイル2: 詳細

### テスト確認
- [ ] スクリプトが正常動作することを確認
- [ ] 既存設定への影響がないことを確認

### ドキュメント更新
- [ ] CLAUDE.md の更新
- [ ] 関連ガイドの更新
- [ ] README の更新（必要な場合）
```

## 設定変更時の必須チェックポイント

### ✅ 事前確認
1. **整合性チェック**: 既存の設定・仕様との矛盾がないか
2. **影響範囲調査**: どの作業・人に影響するか
3. **代替案検討**: より良い方法がないか
4. **コミュニティ価値**: our-compass.md の価値観に合致するか

### ✅ 実装確認  
1. **動作テスト**: 設定が意図通り動くか
2. **既存データ**: 既存のIssue/PRに悪影響がないか
3. **アクセシビリティ**: 初心者でも理解・利用できるか

### ✅ 事後対応
1. **ドキュメント更新**: 関連ドキュメントの同期
2. **周知**: 必要に応じてDiscordで告知
3. **フォローアップ**: 実際の運用での問題点収集

## よくある設定変更パターン

### 🏷️ 新しいラベルカテゴリの追加
```
Issue: [spec] 新ラベルカテゴリ「xxx」の追加提案
Labels: spec + spec-labels + spec-enhancement
Steps:
1. カテゴリの必要性を議論
2. 命名規則と色の設計
3. 既存ラベルとの関係整理
4. github-setup.sh への追加
5. ドキュメント更新
```

### 🎯 Epic構造の変更
```
Issue: [spec] Phase 2 Epic構造の設計
Labels: spec + spec-processes + spec-enhancement + epic
Steps:
1. Phase 1 の振り返り
2. Phase 2 の目標との整合性確認
3. 新しいEpic構造の提案
4. setup-epics.sh の更新
5. epic-design.md の更新
```

### 📝 テンプレートの改善
```
Issue: [spec] Issue テンプレートに初心者向けガイダンス追加
Labels: spec + spec-templates + spec-enhancement
Steps:
1. 現行テンプレートの課題分析
2. 改善案の作成
3. GitHub テンプレートファイルの更新
4. contributing.md の関連部分更新
```

## 設定管理のベストプラクティス

### 📋 常に意識すること
1. **後方互換性**: 既存の作業を壊さない
2. **段階的導入**: いきなり大きく変えず、徐々に改善
3. **ドキュメント連動**: 設定変更とドキュメント更新をセットで実施
4. **コミュニティファースト**: 技術的都合より利用者の分かりやすさ重視

### 🚫 避けるべきこと
1. **独断での重大変更**: spec-breaking は必ず議論を経る
2. **ドキュメント放置**: 設定変更後のドキュメント更新忘れ
3. **テスト不足**: 動作確認せずにリリース
4. **複雑化**: シンプルな設定を複雑にしすぎる

## 更新履歴
- 2025年9月1日: 初版作成